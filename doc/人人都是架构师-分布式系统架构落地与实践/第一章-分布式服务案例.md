## 分布式系统服务案例
### 分布式系统的架构演变
* 单机
* 拆分：水平拆分和垂直拆分  
    水平拆分是从用户->ng->应用->缓存->db的拆分，往往都各自采用集群
    垂直拆分是将应用根据业务来垂直划分，比如分离为用户，商品，库存，订单，交易，监控，结算，大数据等
* 本质上，分布式系统拆分后演进为微服务系统。也等于rpc调用+配置中心+监控+链路追踪，只不过以spring-cloud为代表的微服务将其封装的更全而已
### 系统服务的需求
* 要求大纲：高可用，高性能，可拓展，可监控，易运维  
* 扛住大流量：服务拆分，缓存，分库分表读写分离，异步，降级，限流
### 分布式链路追踪需求
* 例如eagleEye，参考谷歌的dapper论文，也有蚂蚁开源的trace系统，都是基于鹰眼二次开发
    思路就是全局生成唯一traceId，加span的时间对，以树形结构展示整条链路的耗时，顺序等
    采样速率也是要重点考虑的，否则数据量极为庞大，甚至会影响rpc主题性能.
    采样数据只为做监控，实时性可以牺牲一点，考虑基于消息异步